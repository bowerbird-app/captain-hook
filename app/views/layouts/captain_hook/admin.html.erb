<!DOCTYPE html>
<html>
  <head>
    <title>CaptainHook Admin</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <%= yield :head %>
  </head>

  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark" style="display: block !important;">
      <div class="container-fluid">
        <a class="navbar-brand" href="<%= captain_hook.admin_root_path %>">
          âš“ CaptainHook
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse" id="navbarNav" style="display: block !important;">
          <ul class="navbar-nav" style="display: flex !important; flex-direction: row !important; list-style: none !important; padding-left: 0 !important; margin-bottom: 0 !important;">
            <li class="nav-item" style="display: block !important;">
              <%= link_to "Providers", captain_hook.admin_providers_path, 
                  class: "nav-link #{controller_name == 'providers' ? 'active' : ''}", 
                  style: "display: block !important; padding: 0.5rem 1rem !important; color: rgba(255,255,255,0.75) !important; text-decoration: none !important;" %>
            </li>
            <li class="nav-item" style="display: block !important;">
              <%= link_to "Incoming Events", captain_hook.admin_incoming_events_path, 
                  class: "nav-link #{controller_name == 'incoming_events' ? 'active' : ''}", 
                  style: "display: block !important; padding: 0.5rem 1rem !important; color: rgba(255,255,255,0.75) !important; text-decoration: none !important;" %>
            </li>
            <li class="nav-item" style="display: block !important;">
              <%= link_to "Sandbox", captain_hook.admin_sandbox_path, 
                  class: "nav-link #{controller_name == 'sandbox' ? 'active' : ''}", 
                  style: "display: block !important; padding: 0.5rem 1rem !important; color: rgba(255,255,255,0.75) !important; text-decoration: none !important;" %>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Flash Messages -->
    <% if flash.any? %>
      <div class="container mt-3">
        <% flash.each do |type, message| %>
          <% 
            alert_class = case type.to_s
            when 'notice' then 'info'
            when 'alert' then 'danger'
            when 'warning' then 'warning'
            else 'info'
            end
          %>
          <div class="alert alert-<%= alert_class %> alert-dismissible fade show" role="alert">
            <%= simple_format(message, {}, wrapper_tag: "div", sanitize: false) %>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        <% end %>
      </div>
    <% end %>

    <!-- Main Content -->
    <%= yield %>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
